<!DOCTYPE html>
<html>
<head>
    <title>Log In CDRRMO or PNP or BFP</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
</head>
<body>
    <h1 class="h1">Log In CDRRMO or PNP or BFP</h1>
    <form class="form2" action="/login_cdrrmo_pnp_bfp" method="post">
        <label>Role: 
            <select name="role" required>
                <option value="cdrrmo">CDRRMO</option>
                <option value="pnp">PNP</option>
                <option value="bfp">BFP</option>
            </select>
        </label><br>
        <label>Assigned Municipality: <input type="text" name="municipality" required></label><br>
        <label>Contact Number: <input type="tel" name="contact_no" required></label><br>
        <label>Password: <input type="password" name="password" required></label><br>
        <button class="button3" type="submit">Log In</button>
        <button class="button4" onclick="window.location.href='/signup_muna'">Sign Up</button>
        <button class="button2" onclick="window.location.href='/choose_login_type'">Choose Account</button>
    </form>
    <form class="form3" action="/auto_role" method="post">
        {% if cdrrmo_pnp_bfp_users %}
            {% for user in cdrrmo_pnp_bfp_users %}
                <div class="role-item" onclick="autoRole('{{ user.role }}', '{{ user.assigned_municipality }}', '{{ user.contact_no }}', '{{ user.password }}')">
                    {{ user.role|upper }} {{ user.assigned_municipality }}
                </div>
            {% endfor %}
        {% else %}
            <div class="role-item">No CDRRMO/PNP/BFP users found.</div>
        {% endif %}
    </form>
    <script>
        function autoRole(role, municipality, contact_no, password) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/auto_role';
            const roleInput = document.createElement('input');
            roleInput.type = 'hidden';
            roleInput.name = 'role';
            roleInput.value = role;
            const municipalityInput = document.createElement('input');
            municipalityInput.type = 'hidden';
            municipalityInput.name = 'municipality';
            municipalityInput.value = municipality;
            const contactInput = document.createElement('input');
            contactInput.type = 'hidden';
            contactInput.name = 'contact_no';
            contactInput.value = contact_no;
            const passwordInput = document.createElement('input');
            passwordInput.type = 'hidden';
            passwordInput.name = 'password';
            passwordInput.value = password;
            form.appendChild(roleInput);
            form.appendChild(municipalityInput);
            form.appendChild(contactInput);
            form.appendChild(passwordInput);
            document.body.appendChild(form);
            form.submit();
        }
    </script>
</body>
</html>