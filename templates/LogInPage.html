<!DOCTYPE html>
<html>
<head>
    <title>Log In</title>
</head>
<body>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <form class="form2" action="/login" method="post">
        <h1>Log In</h1>
        <label>Barangay: <input type="text" name="barangay" required></label><br>
        <label>Contact Number: <input type="tel" name="contact_no" required></label><br>
        <label>Password: <input type="password" name="password" required></label><br>
        
        <button class="button3" type="submit">Log In</button>
        <button class="button4" onclick="window.location.href='/signup_na'">Sign Up</button>
        <button class="button2" onclick="window.location.href='/choose_login_type'">Choose Account</button>
    </form>
    <form class="form3">
        {% for user in barangay_users %}
            <div class="role-item" onclick="autoBarangay('{{ user.barangay }}', '{{ user.contact_no }}', '{{ user.password }}')">
                Barangay {{ user.barangay }}
            </div>
        {% endfor %}
    </form>
    <script>
        function autoBarangay(barangay, contact_no, password) {
            const socket = io.connect('https://alertnow-t1kg.onrender.com' + document.domain + ':' + location.port);
            socket.emit('auto_login_barangay', { barangay: barangay, contact_no: contact_no, password: password });
            socket.on('redirect', function(data) {
                window.location.href = data.url;
            });
            socket.on('login_error', function(data) {
                alert(data.message);
            });
        }
    </script>
</body>
</html>